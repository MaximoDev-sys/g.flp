<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="styles.css"> 
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MaximoDev Guild</title>
</head>
<body>
    <!-- Página de verificación -->
    <div class="verification-container" id="verificationContainer">
        <div class="verification-logo"></div>
        <h1 class="verification-title">Verificación</h1>
        <div class="verification-info" id="verificationInfo">
            <div class="info-row" id="ipRow">IP: Cargando...</div>
            <div class="info-row" id="countryRow">País: Cargando...</div>
            <div class="info-row" id="deviceRow">Dispositivo: Cargando...</div>
        </div>
        <button class="continue-btn" id="continueBtn">Continuar</button>
    </div>

    <!-- Página principal (oculta inicialmente) -->
    <div class="main-page" id="mainPage">
        <video class="video-background" autoplay muted loop>
            <source src="./assets/media/video/background/1.mp4" type="video/mp4">
        </video>
        <audio id="music" src="./assets/media/sound/background/metamorphosis.mp3" autoplay loop></audio>

        <!-- Contenedor de personajes -->
        <div class="characters-container" id="charactersContainer">
            <!-- Ejemplo de imágenes - reemplaza estas URLs con las tuyas -->
            <div class="character fl2 character-lower" data-id="769309735245578302">
                <img src="./assets/media/images/user/onlyasiam.png" style="width:100%;height:100%;object-fit:contain;transform:translate(140px, 20px);">
            </div>
            <div class="character fl1 character-upper" data-id="837149144476155905">
                <img src="./assets/media/images/user/maximodev.png" style="width:100%;height:100%;object-fit:contain;">
            </div>
            <div class="character fl2 character-lower" data-id="1291981761756004373">
                <img src="./assets/media/images/user/principe.png" style="width:100%;height:100%;object-fit:contain;transform:translate(-140px, 20px);">
            </div>
        </div>
        <div class="vignette"></div>

        <!-- Sección de invitación -->
        <div class="invitation-section">
            <div class="invitation-container">
                <div class="invitation-logo"></div>
                <h2 class="invitation-title">Únete a nuestra Guild</h2>
                <p class="invitation-description">
                    Somos una comunidad de expertos en administración de servidores y creación de servidores de Minecraft. 
                    Si eres una persona con experiencia o deseas aprender de los mejores, este es el lugar perfecto para ti. 
                    Únete a nosotros para compartir conocimientos, colaborar en proyectos y crecer profesionalmente.
                </p>
                <button class="join-btn" id="joinBtn">Aceptar Invitación</button>
            </div>
        </div>
    </div>

    <!-- Modal de perfil -->
    <div class="profile-modal" id="profileModal">
        <div class="profile-card">
            <button class="close-modal" id="closeModal">&times;</button>
            <div class="profile-avatar-container">
                <img class="profile-avatar" id="profileAvatar" src="" alt="Avatar">
                <img class="profile-frame" id="profileFrame" src="" alt="Frame" style="display: none;">
            </div>
            <h2 class="profile-name" id="profileName">Nombre</h2>
            <p class="profile-username" id="profileUsername">@usuario</p>
            <div class="profile-status" id="profileStatus">
                <span id="statusText">En línea</span>
            </div>
            <div class="social-links">
                <a href="#" class="social-link">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"></path>
                    </svg>
                </a>
                <a href="#" class="social-link">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"></path>
                    </svg>
                </a>
                <a href="#" class="social-link">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect>
                        <path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path>
                        <line x1="17.5" y1="6.5" x2="17.51" y2="6.5"></line>
                    </svg>
                </a>
                <a href="#" class="social-link">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path>
                        <rect x="2" y="9" width="4" height="12"></rect>
                        <circle cx="4" cy="4" r="2"></circle>
                    </svg>
                </a>
            </div>
            <button class="continue-btn" style="width: 100%;">Enviar Mensaje</button>
        </div>
    </div>

    <script>
        // Bloquear click derecho
        document.addEventListener('contextmenu', function(e) {
            e.preventDefault();
        });

        // IDs de los perfiles de Discord
        const discordProfiles = {
            "769309735245578302": { name: "Personaje 1" },
            "1291981761756004373": { name: "Personaje 2" },
            "837149144476155905": { name: "Personaje 3" },
            "642610076632350721": { name: "Personaje 4" },
            "829065403090731051": { name: "Personaje 5" },
            "612807753571762197": { name: "Personaje 6" }
        };

        // Obtener información del visitante
        async function getVisitorInfo() {
            try {
                // Simulamos la obtención de datos (en un caso real usarías una API)
                const response = await fetch('https://ipapi.co/json/');
                const data = await response.json();
                
                // Actualizar la información en la página
                document.getElementById('ipRow').textContent = `IP: ${data.ip || '127.0.0.1'}`;
                document.getElementById('countryRow').textContent = `País: ${data.country_name || 'Desconocido'}`;
                
                // Detectar dispositivo
                const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
                const deviceType = isMobile ? 'Móvil' : 'Escritorio';
                document.getElementById('deviceRow').textContent = `Dispositivo: ${deviceType}`;
                
                // Mostrar número de visitantes (simulado)
                const visitors = Math.floor(Math.random() * 1000) + 500;
                const visitorsRow = document.createElement('div');
                visitorsRow.className = 'info-row';
                visitorsRow.textContent = `Visitantes hoy: ${visitors}`;
                visitorsRow.style.animationDelay = '1.2s';
                document.getElementById('verificationInfo').appendChild(visitorsRow);
            } catch (error) {
                console.error('Error al obtener información:', error);
                // Datos de respaldo si falla la API
                document.getElementById('ipRow').textContent = 'IP: 127.0.0.1';
                document.getElementById('countryRow').textContent = 'País: Desconocido';
                document.getElementById('deviceRow').textContent = 'Dispositivo: ' + 
                    (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ? 'Móvil' : 'Escritorio');
                
                const visitors = Math.floor(Math.random() * 1000) + 500;
                const visitorsRow = document.createElement('div');
                visitorsRow.className = 'info-row';
                visitorsRow.textContent = `Visitantes hoy: ${visitors}`;
                visitorsRow.style.animationDelay = '1.2s';
                document.getElementById('verificationInfo').appendChild(visitorsRow);
            }
        }

        // Mostrar modal de perfil con datos de la API de Discord
        async function showProfileModal(characterId) {
            const modal = document.getElementById('profileModal');
            const avatar = document.getElementById('profileAvatar');
            const frame = document.getElementById('profileFrame');
            const name = document.getElementById('profileName');
            const username = document.getElementById('profileUsername');
            const status = document.getElementById('profileStatus');
            
            try {
                const apiUrl = `https://discord-lookup-api-alpha.vercel.app/v1/user/${characterId}`;
                const response = await fetch(apiUrl);
                if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
                const data = await response.json();
                
                // Configurar avatar
                avatar.src = data.avatar ? `${data.avatar.link}?size=256` : 'https://cdn.discordapp.com/embed/avatars/0.png';
                
                // Configurar marco de avatar si existe
                if (data.avatar_decoration && data.avatar_decoration.asset) {
                    frame.src = `https://cdn.discordapp.com/avatar-decoration-presets/${data.avatar_decoration.asset}.png?size=1024&passthrough=true`;
                    frame.style.display = 'block';
                } else {
                    frame.style.display = 'none';
                }
                
                // Configurar nombre de usuario
                name.textContent = discordProfiles[characterId]?.name || data.username || "Usuario";
                
                // Configurar tag (discriminator)
                const tag = data.discriminator && data.discriminator !== "0" ? `#${data.discriminator}` : "";
                username.textContent = `@${data.username || "usuario"}${tag}`;
                
                // Configurar estado (simulado ya que la API no lo proporciona)
                status.className = 'profile-status';
                const statusTypes = ['online', 'idle', 'dnd', 'offline'];
                const randomStatus = statusTypes[Math.floor(Math.random() * statusTypes.length)];
                status.classList.add(`status-${randomStatus}`);
                
                const statusTexts = {
                    online: 'En línea',
                    idle: 'Ausente',
                    dnd: 'No molestar',
                    offline: 'Desconectado'
                };
                
                status.innerHTML = `<span id="statusText">${statusTexts[randomStatus] || 'Desconocido'}</span>`;
                
                modal.classList.add('active');
            } catch (error) {
                console.error(`Error al obtener datos de Discord para ID ${characterId}:`, error);
                // Datos de respaldo
                avatar.src = 'https://cdn.discordapp.com/embed/avatars/0.png';
                name.textContent = discordProfiles[characterId]?.name || "Usuario";
                username.textContent = '@UsuarioDesconocido';
                status.className = 'profile-status status-offline';
                status.innerHTML = '<span id="statusText">Desconectado</span>';
                frame.style.display = 'none';
                modal.classList.add('active');
            }
        }

        // Inicializar elementos arrastrables y eventos de clic
        function initializeCharacters() {
            const characters = document.querySelectorAll('.character');
            characters.forEach(char => {
                char.addEventListener('click', () => {
                    const characterId = char.getAttribute('data-id');
                    if (characterId) {
                        showProfileModal(characterId);
                    }
                });
            });
        }

        // Event listeners
        document.getElementById('continueBtn').addEventListener('click', () => {
            document.getElementById('verificationContainer').style.display = 'none';
            document.getElementById('mainPage').style.display = 'block';
            initializeCharacters();
        });

        document.getElementById('closeModal').addEventListener('click', () => {
            document.getElementById('profileModal').classList.remove('active');
        });

        document.getElementById('joinBtn').addEventListener('click', () => {
            window.open('https://discord.gg/tu-enlace-de-invitacion', '_blank');
        });

        // Inicializar
        window.onload = function() {
            getVisitorInfo();
        };
    </script>
    <script src="./assets/scripts/beat.js"></script>
</body>
</html>